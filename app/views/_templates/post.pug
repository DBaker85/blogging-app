include ../_base/components.pug
.post
  .post__filter
    select(name="categories" id="category" ng-model="postCtrl.selectedCategory" ng-change="postCtrl.fetchposts(postCtrl.selectedCategory)")
      optgroup(ng-repeat="category in postCtrl.categories" label="{{category.category}}")
        option(ng-repeat="subcategory in category.subcategories" ng-show="subcategory.active")
          | {{subcategory.subcategory}}
    //- button.btn.btn-primary(ng-click="postCtrl.fetchposts()")
      | X
    +button({
            type:'icon',
            icon:'cross',
            attributes:{
              'ng-click':"postCtrl.fetchposts('all')"
            }
          })
  .post__content.box.box8(data-expand="true" data-theme="1" ng-repeat="post in postCtrl.posts" class="{{post.open?'open-article':''}}")
    article
      h2 {{post.title}}
      .small
        +icon({
          icon:'clock'
        })
        | {{post.date}}&nbsp;
        //- if category associated, display category with link to category page

        //- if article was edited, show edit date
        span
          | &nbsp;|| last edited on {{post.editdate}}
      div(ng-bind-html="post.body | limit: post.open")
      span
          | || posted in&nbsp;
          a(href='' ng-click="postCtrl.filterposts(post.category)")
            | {{post.category}}
    .readmore(ng-click="postCtrl.postExpander($index)")
      .readmore__text
        | Read more
      .readmore__close
        | Close
      i.icon-chevron-thin-right
  .post__pagination
    ul
      li <<
      li(ng-repeat="page in postCtrl.pages")
        | {{$index+1}}
      li >>
