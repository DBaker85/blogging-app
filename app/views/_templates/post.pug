include ../_base/components.pug
.post
  .post__filter
    .select-container
      select(name="categories" id="category" ng-model="postCtrl.selectedCategory" ng-change="postCtrl.fetchposts(0)")
        option(value="all" disabled)
          | Filter by category
        optgroup(ng-repeat="category in postCtrl.categories" label="{{category.category}}")
          option(ng-repeat="subcategory in category.subcategories" ng-show="subcategory.active")
            | {{subcategory.subcategory}}
      label.sr-only.label--select(for="category")
        | Filter by category
    //- button.btn.btn-primary(ng-click="postCtrl.fetchposts()")
      | X
    +button({
            type:'icon',
            icon:'cross',
            attributes:{
              'ng-click':'postCtrl.clearCategory()'
            }
          })
  .post__content.box.box8(data-expand="true" data-theme="1" ng-repeat="post in postCtrl.posts" class="{{post.open?'open-article':''}}")
    article
      .post__title
        h2 {{post.title}}
        .date
          .date__icon
            +icon({
              icon:'clock'
            })
          .date__text
            .big {{post.date | date : 'EEE'}}
            .small {{post.date | date : 'dd/mm/yy'}}
      .small(ng-if="post.editdate")
        | last edited on {{post.editdate | date : 'EEE, dd/mm/yyyy'}}
      div(ng-bind-html="post.body | limitHtml: post.open")
      .tag.small(ng-click="postCtrl.selectedCategory=post.category; postCtrl.fetchposts(0)")
        i.icon-shopping
        |  {{post.category}}
    .readmore(ng-click="postCtrl.postExpander($index)")
      .readmore__text
        | Read more
      .readmore__close
        | Close
      i.icon-chevron-thin-right
  select(name="pagesize" id="pagesize" ng-model="postCtrl.range" ng-change="postCtrl.fetchposts(0)")
    option(value="2") 2
    option(value="5") 5
    option(value="10") 10
    option(value="15") 15
  .post__pagination(ng-if="postCtrl.pages.length > 1")
    ul
      li
        a
          | <<
      li(ng-repeat="page in postCtrl.pages" class="{{ postCtrl.activePage == $index? 'active': '' }}")
        a(ng-click="postCtrl.navigate($index)")
          | {{$index+1}}
      li
        a
          | >>
